# 目的
Python并发编程

# 概念
Python 通过 GIL（全局解释器锁）限制了多线程的并行能力，但提供了多种并发编程方式，如线程、多进程、事件循环等，这些方式各有优缺点，适用于不同的场景。


从Python 3.5开始，引入了一种新的异步编程语法async/await，用于简化异步操作的编写。基于生成器和事件循环，使得异步代码更加直观和易于理解。其中，async关键字用于定义一个异步函数。当一个函数被定义为async时，它会返回一个协程对象。协程是一种特殊的函数，它可以在执行过程中暂停和恢复。

调用async函数时，不会立即执行函数体，而是返回一个协程对象。要运行协程，需要将其提交到事件循环中。await关键字用于暂停当前协程的执行，等待一个可等待对象（如协程）完成。

当遇到await时，当前协程会暂停执行，并将控制权交还给事件循环。事件循环会继续执行其他任务，直到await的异步操作完成。

协程的启动：调用async函数会返回一个协程对象，要执行这个协程，需要将其提交给事件循环，比如通过asyncio.run()或loop.run_until_complete()方法。

暂停与恢复：当协程遇到 await 时，它会暂停并将控制权交给事件循环。事件循环接着执行其他任务，直到 await 的操作完成，然后恢复该协程的执行。


>处理中：任务A
处理中：任务B
处理中：任务C
处理中：任务D
处理完成：任务A，耗时 1.71 秒
处理完成：任务B，耗时 1.72 秒
处理完成：任务C，耗时 1.84 秒
处理完成：任务D，耗时 0.63 秒
总耗时：5.90 秒

使用异步编程
>开始处理       
处理中：任务A  
处理中：任务B  
处理中：任务C  
处理中：任务D
处理完成：任务A，耗时 0.57 秒
处理完成：任务B，耗时 0.71 秒
处理完成：任务C，耗时 1.76 秒
处理完成：任务D，耗时 1.86 秒
总耗时：1.86 秒

所有任务几乎同时启动，系统在它们之间切换控制权。不会因某个任务等待 I/O 或 sleep 而空转 CPU。彼此之间的等待时间被重叠利用。